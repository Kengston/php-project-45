#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

use BrainGames\Cli;
use function cli\line;
use function cli\prompt;

function isEven(int $number) : bool {
    return $number % 2 === 0;
}

function runEvenGame(string $name): void {

    line('Answer "yes" if the number is even, otherwise answer "no".');

    $numCount = 3;

    for ($i = 0; $i < $numCount; $i++) {
        $questionCount = rand(1, 100);
        $realAnswer = isEven($questionCount) ? 'yes' : 'no';

        line("Question: {$questionCount}");
        $userAnswer = prompt('Your answer');

        if ($userAnswer !== $realAnswer) {
            line("'{$userAnswer}' is wrong answer ;(. Correct answer was '{$realAnswer}'.");
            line("Let's try again, {$name}!");
            return;
        }

        line('Correct!');
    }

    line("Congratulations, {$name}!");
}

$name = Cli\welcomeUser();
runEvenGame($name);